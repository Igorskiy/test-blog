{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../components/MyLayout';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Link from 'next/link';\nimport { getPostFromServer, getPostsFromServer, removePostFromServer } from '../api';\nimport { setPosts, setPost } from '../store/actions';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { Button, Typography } from '@material-ui/core';\nconst useStyles = makeStyles(theme => createStyles({\n  postBody: {\n    display: 'box',\n    margin: 'auto',\n    textAlign: 'justify',\n    maxHeight: '500px',\n    overflow: 'hidden',\n    lineClamp: 5,\n    boxOrient: 'vertical'\n  },\n  link: {\n    display: 'block',\n    textDecoration: 'none',\n    color: 'black',\n    fontSize: '24px'\n  },\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    marginTop: '20px',\n    padding: '25px',\n    textAlign: 'center',\n    color: theme.palette.text.primary,\n    outline: 'none',\n    cursor: 'pointer',\n    marginLeft: '20px',\n    marginRight: '20px'\n  }\n}));\n\nconst Index = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const posts = useSelector(state => state.posts.posts);\n\n  const getPosts = async () => {\n    dispatch(setPosts((await getPostsFromServer())));\n  };\n\n  const removePost = async id => {\n    await removePostFromServer(id);\n    getPosts();\n  };\n\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: classes.root\n  }, __jsx(Grid, {\n    container: true\n  }, posts.map(post => __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    key: post.id\n  }, __jsx(Link, {\n    href: \"/posts/[id]\",\n    as: `/posts/${post.id}`\n  }, __jsx(Paper, {\n    className: classes.paper,\n    onClick: async () => dispatch(setPost((await getPostFromServer(post.id))))\n  }, __jsx(\"a\", {\n    className: classes.link\n  }, post.title), __jsx(Typography, {\n    className: classes.postBody\n  }, post.body), __jsx(Button, {\n    onClick: () => removePost(post.id)\n  }, `delete`))))))));\n};\n\nIndex.getInitialProps = async ({\n  store\n}) => {\n  const data = await getPostsFromServer();\n  store.dispatch(setPosts(data));\n  return {\n    data\n  };\n};\n\nexport default Index;\n/* {posts.map((post: Post) => (\n  <div key={post.id}>\n    <div>\n      <span onClick={() => removePost(post.id)}>{`delete`}</span>\n      <Link href=\"/posts/[id]\" as={`/posts/${post.id}`}>\n        <a\n          onClick={async () =>\n            dispatch(setPost(await getPostFromServer(post.id)))\n          }\n        >\n          {post.title}\n        </a>\n      </Link>\n      {post.body}\n    </div>\n  </div> */","map":null,"metadata":{},"sourceType":"module"}