{"version":3,"file":"static/webpack/static\\development\\pages\\posts\\[id].js.efc92227343b8a50d1e0.hot-update.js","sources":["webpack:///./pages/posts/.tsx"],"sourcesContent":["import Layout from '../../components/MyLayout';\nimport { NextPage, NextPageContext } from 'next';\nimport { getPostFromServer, sendCommentOnServer } from '../../api';\nimport { Comment } from '../../types';\nimport { useDispatch, useSelector, RootStateOrAny } from 'react-redux';\nimport { setCommentBody, setPost } from '../../store/actions';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport { Button, TextField } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    textField: {\n      marginTop: '25px',\n      marginBottom: '10px',\n      maxWidth: '60%',\n      justifyContent: 'center',\n    },\n    root: {\n      flexGrow: 1,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    paper: {\n      minHeight: '60vh',\n      minWidth: '60vw',\n      maxWidth: '90vw',\n      marginTop: '20px',\n      marginRight: '20px',\n      marginLeft: '20px',\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.primary,\n      outline: 'none',\n      cursor: 'pointer',\n    },\n    comment: {\n      display: 'flex',\n      alignItems: 'center',\n      width: 'max-content',\n      paddingTop: '5px',\n      paddingLeft: '15px',\n      paddingRight: '15px',\n      marginTop: '15px',\n      maxWidth: '30vw',\n      minHeight: '50px',\n    },\n    post: {\n      paddingBottom: '20px',\n    },\n    commentTitle: {\n      fontWeight: 'bold',\n      paddingTop: '15px',\n    },\n  }),\n);\n\nconst PostPage: NextPage = () => {\n  const classes = useStyles();\n\n  const dispatch = useDispatch();\n  const commentBody = useSelector(\n    (state: RootStateOrAny) => state.inputs.commentBody,\n  );\n  const post = useSelector((state: RootStateOrAny) => state.posts.post);\n\n  const addComment = async (\n    postId: number | undefined,\n    commentBody: string,\n  ) => {\n    if (commentBody.trim()) {\n      await sendCommentOnServer(postId, commentBody);\n      dispatch(setPost(await getPostFromServer(postId)));\n      dispatch(setCommentBody(''));\n    } else {\n      alert(`Your comment is empty, please, fill it.`);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className={classes.root}>\n        <Paper\n          className={classes.paper}\n          onClick={async () =>\n            dispatch(setPost(await getPostFromServer(post.id)))\n          }\n        >\n          <Paper className={classes.post}>\n            <h1>{post.title}</h1>\n            <p>{post.body}</p>\n          </Paper>\n          <div>\n            <div>\n              <div className={classes.commentTitle}>Comments:</div>\n              {post.comments ? (\n                post.comments.map((comment: Comment) => (\n                  <Paper key={comment.id} className={classes.comment}>\n                    <div>{comment.body}</div>\n                  </Paper>\n                ))\n              ) : (\n                <div>No comments yet</div>\n              )}\n            </div>\n            <div>\n              <TextField\n                id=\"outlined-multiline-flexible\"\n                className={classes.textField}\n                label=\"New comment\"\n                multiline\n                rowsMax=\"100\"\n                fullWidth\n                placeholder=\"Add your comment here\"\n                value={commentBody}\n                onChange={e => dispatch(setCommentBody(e.target.value))}\n                variant=\"outlined\"\n              />\n            </div>\n            <Button onClick={() => addComment(post.id, commentBody)}>\n              Add new comment\n            </Button>\n          </div>\n        </Paper>\n      </div>\n    </Layout>\n  );\n};\n\nPostPage.getInitialProps = async function(context: NextPageContext) {\n  const { id } = context.query;\n  const post = await getPostFromServer(+id);\n  context.store.dispatch(setPost(post));\n  return { post };\n};\n\nexport default PostPage;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAxCA;AADA;AACA;AA+CA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAOA;AAPA;AAAA;AACA;AADA;AASA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAIA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;;;;A","sourceRoot":""}